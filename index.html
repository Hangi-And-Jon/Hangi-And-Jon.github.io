<!DOCTYPE html><html lang='en' class=''>
<head>
  <meta charset='UTF-8'>
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0"/> -->
  <!--<meta name="viewport" content="width=640, initial-scale=1.0"/>-->


<style class="cp-pen-styles">/* Kaushan+Script, oregano, sail */
@import url("https://fonts.googleapis.com/css?family=Kaushan+Script");
html, body, .container {
  height: 100%;
  font-family: 'Kaushan Script','Sail', cursive;
}

body {
  background: #e74;
  overflow: hidden;
  background-image: linear-gradient(to bottom, #190e14, #0d0d4b 30%, #c76075 80%, #e9b64b 95%);
  background-image: radial-gradient(circle at center bottom, #e9b64b, #c76075 15%, #0d0d4b 75%, #190e14 90%);
}

.navbar {
  overflow: hidden;
  background-color: #333;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 200;
  font-family: 'Georgia', serif;
}

.navbar a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  text-decoration: none;
}

a { color: yellow; }

.navbar a:hover {
  background: #ddd;
  color: black;
}

.menu_wrapper {
  position:absolute;
  margin:auto;
  z-index: 10;
  color: #f2f2f2;
  overflow: auto;
  font-family: 'Georgia', serif;
  padding: 16px;      font-size: 24px; top:380px; left:0px; right:400px; width:480px;
}

.navbar a     { padding: 14px 28px; font-size: 28px; }
.menu_wrapper { padding: 16px;      font-size: 24px; top:380px; left:0px; right:400px; width:480px; }
@media (max-height: 800px) {
.menu_wrapper { height: 250px; }
}

@media (min-height: 800px) and (max-height: 1000px) {
.menu_wrapper { height: 300px; }
}

@media (min-height: 1000px) and (max-height: 1400px) {
.menu_wrapper { height: 500px; }
}

@media (min-height: 1400px) {
.menu_wrapper { height: 800px; }
}

.letter {
  position:absolute;
  margin:auto;
  perspective: 1000;
  background:#fff;
  border-radius:10px;
  box-shadow:0 0 10px rgba(0,0,0,0.1);
  text-align:center;
  transform-origin: center;
  z-index: 96;
}

.letter span {
  margin:10px auto;
  background: transparent;
  border-radius:50px;
  display:inline-block;
}


.letter.animate {
  animation:6s slideLetter infinite ease-in-out;
}
@media (max-width: 1400px) {
@keyframes slideLetter {
  40%,60%,100%{transform:translate3d(0,-160px,0)}
}

@keyframes expandLetter {
  0%{transform:translate3d(0,-160px,0)}
  100%{transform:scale(2,2)}
}
.letter                    { width:320px; height:160px; top: 250px; left:0px; right:0px; }
.letter span               { width:250px; height:20px; font-size: 30px; }
.letter span:first-of-type { margin-top:35px; }
}

@media (min-width: 1400px) {
@keyframes slideLetter {
  40%,60%,100%{transform:translate3d(0,-320px,0)}
}

@keyframes expandLetter {
  0%{transform:translate3d(0,-320px,0)}
  100%{transform:scale(2,2)}
}
.letter                    { width:640px; height:320px; top: 500px; left:0px; right:0px; }
.letter span               { width:500px; height:40px; font-size: 60px; }
.letter span:first-of-type { margin-top:35px; }
}

.envolope {
  position:absolute;
  margin:auto;
  z-index:2;
  perspective: 1000;
  top:0px; left:0; right:0;
}
#envolope {
  position:absolute;
  margin:auto;
  border-radius:0 0 10px 10px;
  overflow:hidden;
}
#envolope.back{
  background:rgb(168, 6, 6);
  box-shadow:0 0 10px rgba(0,0,0,0.1);
  overflow:visible;
}
.left{
  position:absolute;
  z-index:99;
}
.right{
  position:absolute;
  z-index:98;
}
.top_back{
  position:absolute;
  margin:auto;
  transform-origin: top;
  z-index:95;
  width:0px; height:0px; top:0px;
}
.top{
  position:absolute;
  margin:auto;
  transform-origin: top;
  z-index:100;
  width:0px; height:0px; top:0px; border-bottom: 0px;
}

.top_flip{
  position:absolute;
  margin:auto;
  transform-origin: top;
  z-index:95;
  width:0px; height:0px; top:0px; border-bottom: 0px;
}

.top.text:after {
  position: relative;
  content: "Click Me!";
}
@media (max-width: 1400px) {
#envolope { width:340px; height:190px; top:250px; left:0; right:0; }
.left     { top:-10px; left:-620px;               border-left: 600px solid transparent; border-right: 600px solid transparent; border-bottom: 350px solid red;       }
.right    { top:-10px;              right:-620px; border-left: 600px solid transparent; border-right: 600px solid transparent; border-bottom:350px solid #D60B0B;    }
.top_back {            left:-999px; right:-999px; border-left: 170px solid transparent; border-right: 170px solid transparent; border-top:170px solid rgb(168, 6, 6);}
.top      {            left:-999px; right:-999px; border-left: 170px solid transparent; border-right: 170px solid transparent; border-top:170px solid rgb(168, 6, 6);}
.top_flip {            left:-999px; right:-999px; border-left: 170px solid transparent; border-right: 170px solid transparent; border-top:170px solid rgb(168, 6, 6);}
.top.text:after { top: -150px; left: -30px; font-size: 40px; }
}
@media (min-width: 1400px) {
#envolope { width:680px; height:380px; top:500px; left:0; right:0; }
.left     { top:-10px; left:-620px;               border-left: 600px solid transparent; border-right: 600px solid transparent; border-bottom: 350px solid red;       }
.right    { top:-10px;              right:-620px; border-left: 600px solid transparent; border-right: 600px solid transparent; border-bottom:350px solid #D60B0B;    }
.top_back {            left:-999px; right:-999px; border-left: 340px solid transparent; border-right: 340px solid transparent; border-top:340px solid rgb(168, 6, 6);}
.top      {            left:-999px; right:-999px; border-left: 340px solid transparent; border-right: 340px solid transparent; border-top:340px solid rgb(168, 6, 6);}
.top_flip {            left:-999px; right:-999px; border-left: 340px solid transparent; border-right: 340px solid transparent; border-top:340px solid rgb(168, 6, 6);}
.top.text:after { top: -300px; left: -60px; font-size: 80px; }
}

@keyframes flipTop {
  100%{transform:rotateX(180deg);}
}

div#beach,
canvas#canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

div#beach {
  background-image: url(background.png);
  /* background-size: cover; */
  background-position: bottom right;
  background-repeat: no-repeat;
}
div#video { position: absolute; }
#people   { position: absolute; }
#car      { position: absolute; }

div#sea {
  position: absolute;
  background-color: blue;
  width: 100%;
  background-image: radial-gradient(circle at center top, #23485a, #0d0246);
  bottom: 0px; left: 0px;
}

@media (max-width: 1400px) {
div#video        { right: 145px; bottom: 117.5px; }
div#video iframe { width: 147px; height: 90px; }
div#beach { background-size: 1000px; }
#people   { left: 40px; bottom: 35px; width:  80px;}
#car      { bottom: 23px; left:  90px; width: 115px; }
div#sea   { height: 42.5px; }
}

@media (min-width: 1400px) {
div#video        { right: 290px; bottom: 235px; }
div#video iframe { width: 295px; height: 180px; }
div#beach { background-size: 2000px; }
#people   { left: 80px; bottom: 70px; width: 160px; }
#car      { bottom: 46px; left: 180px; width: 230px; }
div#sea   { height: 85px; }
}

.merrywrap {
  position: absolute;
  background-color: #000000;
  z-index: 0;
  transition: background-color .5s ease;
  top: 0px; bottom: 0px; left: 0px; right: 0px;
}

.icons {
  position: absolute;
  left: 10px;
  top: 110px;
  /*top:50%;
  width: 100%;*/
  height: auto;
  transform: /*translateY(95px)*/ rotate(-20deg);
}
.icons .row {
  width: 100%;
  text-align: center;
}
.icons .row span {
  color: #e5e5e5;
  display: inline-block;
  opacity: 0;
  transition: transform 0.5s ease-in, opacity 0.7s;
}

/*@media (max-width: 1400px) {
.icons .row span { left: 10px; font-size: 12.5px; text-shadow: 1px 1px 0 rgba(96, 125, 139, 0.4); }
}

@media (min-width: 1400px) {*/
.icons .row span { left: 30px; font-size: 50px; text-shadow: 4px 4px 0 rgba(96, 125, 139, 0.4); }
/*}*/
.step-1 .icons .row span {  opacity: 1; }

@keyframes wobble {
  25% { transform: rotate( 4deg); }
  75% { transform: rotate(-2deg); }
}
@keyframes flyUp {
  75%  { opacity: 1; }
  100% { opacity: 0; transform: translateY(-1000px) rotate(20deg); }
}
@keyframes flyDown {
  75%  { opacity: 1; }
  100% { opacity: 0; transform: translateY(100%); }
}

.step-1 .icons .row span { opacity: 0; }
.step-1 .icons .row span:first-child  { transform: translateY(700%) translateX(600%); }
.step-1 .icons .row span:nth-child(2) { transform: translateY(700%) translateX(500%); }
.step-1 .icons .row span:nth-child(3) { transform: translateY(700%) translateX(400%); }
.step-1 .icons .row span:nth-child(4) { transform: translateY(700%) translateX(300%); }
.step-1 .icons .row span:nth-child(5) { transform: translateY(700%) translateX(200%); }
.step-1 .icons .row span:nth-child(6) { transform: translateY(700%) translateX(100%); }
.step-1 .icons .row span:nth-child(7) { transform: translateY(700%) translateX( 0  ); }
.step-1 .icons .row span:nth-child(8) { transform: translateY(700%) translateX(-100%);}
.step-1 .icons .row span:nth-child(9) { transform: translateY(700%) translateX(-200%);}
.step-1 .icons .row span:nth-child(10){ transform: translateY(700%) translateX(-300%);}
.step-1 .icons .row span:nth-child(11){ transform: translateY(700%) translateX(-400%);}
.step-1 .icons .row span:nth-child(12){ transform: translateY(700%) translateX(-500%);}
.step-1 .icons .row span:nth-child(13){ transform: translateY(700%) translateX(-600%);}
.step-2 .icons .row span:nth-child(2) { -webkit-transition-delay: 0.1s;  transition-delay: 0.1s; }
.step-2 .icons .row span:nth-child(3) { -webkit-transition-delay: 0.15s; transition-delay: 0.15s;}
.step-2 .icons .row span:nth-child(4) { -webkit-transition-delay: 0.2s;  transition-delay: 0.2s; }
.step-2 .icons .row span:nth-child(5) { -webkit-transition-delay: 0.25s; transition-delay: 0.25s;}
.step-2 .icons .row span:nth-child(6) { -webkit-transition-delay: 0.3s;  transition-delay: 0.3s; }
.step-2 .icons .row span:nth-child(7) { -webkit-transition-delay: 0.35s; transition-delay: 0.35s;}
.step-2 .icons .row span:nth-child(8) { -webkit-transition-delay: 0.4s;  transition-delay: 0.4s; }
.step-2 .icons .row span:nth-child(9) { -webkit-transition-delay: 0.45s; transition-delay: 0.45s;}
.step-2 .icons .row span:nth-child(10){ -webkit-transition-delay: 0.5s;  transition-delay: 0.5s; }
.step-2 .icons .row span:nth-child(11){ -webkit-transition-delay: 0.55s; transition-delay: 0.55s;}
.step-2 .icons .row span:nth-child(12){ -webkit-transition-delay: 0.6s;  transition-delay: 0.6s; }
.step-2 .icons .row span:nth-child(13){ -webkit-transition-delay: 0.65s; transition-delay: 0.65s;}

.step-2 .icons      span, .step-3 .icons      span, .step-4 .icons span { opacity: 1; transition-timing-function: cubic-bezier(0, 0, 0.2, 0.91); }
.step-4 .icons .row span, .step-3 .icons .row span { color: #c6e2ff; animation: neon .08s ease-in-out infinite alternate;/*animation: wobble 0.6s linear infinite forwards;*/ }
.step-4 .icons .row span:nth-child(even), .step-3 .icons .row span:nth-child(even) { animation-duration: 0.7s; }

@keyframes neon {
  from {
    text-shadow: 0 0 6px rgba(202, 228, 225, 0.92), 0 0 30px rgba(202, 228, 225, 0.34), 0 0 12px rgba(30, 132, 242, 0.52), 0 0 21px rgba(30, 132, 242, 0.92), 0 0 34px rgba(30, 132, 242, 0.78), 0 0 54px rgba(30, 132, 242, 0.92);
  }
  to {
    text-shadow: 0 0 6px rgba(202, 228, 225, 0.98), 0 0 30px rgba(202, 228, 225, 0.42), 0 0 12px rgba(30, 132, 242, 0.58), 0 0 22px rgba(30, 132, 242, 0.84), 0 0 38px rgba(30, 132, 242, 0.88), 0 0 60px #1e84f2;
  }
}

.moon          { position: absolute; border-radius: 50%; background: #ddd; }
.moon .crater1 { position: absolute; border-radius: 50%; background: #bbb; }
.moon .crater2 { position: absolute; border-radius: 50%; background: #bbb; }
.moon .crater3 { position: absolute; border-radius: 50%; background: #bbb; }

@media (max-width: 1400px) {
.moon          { width: 50px;  height: 50px;  top: 100px;  right: 30px;   box-shadow: inset 10px -5px 0 0 #b9b9b9;   }
.moon .crater1 { width: 15px;  height: 15px;  top: 10px;   right: 10px;   box-shadow: inset -1.5px 0.75px 0 0 #aaa;  }
.moon .crater2 { width: 5px;   height: 5px;   top: 22.5px; right: 25px;   box-shadow: inset -0.5px 0.25px 0 0 #aaa;  }
.moon .crater3 { width: 7.5px; height: 7.5px; top: 30px;   right: 12.5px; box-shadow: inset -0.75px 0.375px 0 0 #aaa;}
}
@media (min-width: 1400px) {
.moon          { width: 100px; height:100px; top: 100px;   right: 60px;   box-shadow: inset 20px -10px 0 0 #b9b9b9; }
.moon .crater1 { width: 30px;  height: 30px; top: 20px;    right: 20px;   box-shadow: inset -0.3px 1.5px 0 0 #aaa;  }
.moon .crater2 { width: 10px;  height: 10px; top: 45px;    right: 50px;   box-shadow: inset -1px   0.5px  0 0 #aaa; }
.moon .crater3 { width: 15px;  height: 15px; top: 60px;    right: 25px;   box-shadow: inset -1.5px 0.75px 0 0 #aaa; }
}
</style></head>
<body>

<div class="navbar">
  <a href="#home" id="button_home">Where and When</a>
  <a href="#news" id="button_news">Info</a>
  <a href="#contact" id="button_contact">Contact</a>
</div>

<div class="menu_wrapper">
  <div class="page" id="page_home" style="display:none">
    <h1>Where:</h1>
    <p>Agapanto - flor del amor<br>
       Port de Soller<br>
       Mallorca<br>
       <a href="https://www.agapanto.com">agapanto.com</a> </p>
    <h1>When:</h1>

    <p>Friday 4th of October 2019 at 16:00 until 24:00.</p>

  </div>

  <div class="page" id="page_news" style="display:none">
    <h1>Info</h1>

    <p>You are free to stay anywhere you wish on the island and arrive at Agapanto at 16:00 on Friday the 4th of October. However,
      we will be staying in Mallorca one week before the wedding celebration.
      You are welcome to come earlier and enjoy this time with us and we will try to arrange get togethers for days at the beach,
      countryside treks, lunch/brunch/dinners or other events for those interested.
    </p><p>
      On the day of the celebration we will start with an anti pasti buffet followed by open grill dishes, cake and other delicious desserts.
      There will be plenty of drinks served and we expect you to dance all night long :D
    </p>
  </div>

  <div class="page" id="page_contact" style="display:none">
    <h1>Contact</h1>

    <p>Please reply to either Jon Eric or Hangi by <i>1st of June</i> if you can join our great party and when you will be arriving.
    If you have any questions regarding Mallorca, the celebration or anything else don't hesitate to contact either of us.
    </p><p>
    Phone:<br>
    Hangi: +47-48195578<br>
    Jon: &nbsp;&nbsp;&nbsp;&nbsp;+47-96919324
    </p>
  </div>

</div>

<div id="envolope" class="back">
  <div id="envolope-top-back" class="top_back"></div>
  <div id="envolope-top" class="top text"></div>
</div>
<div id="letter" class="letter">
  <span>You have been</span>
  <span>invited to ...</span>
</div>
<div id="envolope" class="front">
  <div class="left"></div>
  <div class="right"></div>
</div>

<div class='moon'>
  <div class='crater1'></div>
  <div class='crater2'></div>
  <div class='crater3'></div>
</div>
<canvas id="canvas"></canvas>
<div id="sea"></div>
<div id="beach"></div>
<img src="people.png" alt="jumping-people" id="people" />
<!--<img src="car.png" alt="jumping-people" id="car" />-->

<div id="merrywrap" class="merrywrap">
  <div class="icons">
    <div class="row">
      <span>J</span>
      <span>o</span>
      <span>n</span>
      <span></span>
      <span>&</span>
      <span></span>
      <span>H</span>
      <span>a</span>
      <span>n</span>
      <span>g</span>
      <span>i</span>
      <span>'</span>
      <span>s</span>
    </div>
    <div class="row">
      <span>W</span>
      <span>e</span>
      <span>d</span>
      <span>d</span>
      <span>i</span>
      <span>n</span>
      <span>g</span>
      <span></span>
      <span>C</span>
      <span>e</span>
      <span>l</span>
      <span>e</span>
      <span>b</span>
      <span>r</span>
      <span>a</span>
      <span>t</span>
      <span>i</span>
      <span>o</span>
      <span>n</span>
    </div>
    <div class="row">
      <span>4</span>
      <span>t</span>
      <span>h</span>
      <span> </span>
      <span>o</span>
      <span>f</span>
      <span> </span>
      <span>O</span>
      <span>c</span>
      <span>t</span>
      <span>.</span>
      <span> </span>
      <span>2</span>
      <span>0</span>
      <span>1</span>
      <span>9</span>
    </div>
  </div>
</div>

<div id="video">
<!--<iframe width="255" height="155" src="https://www.youtube.com/embed/KDxJlW6cxRk?controls=0&loop=1" frameborder="0" allowfullscreen></iframe>-->
</div>
<script > /*
              Everybody say Happy Birthday! This gift is a compound of various pens plus some other things I added
              - gift
              https://codepen.io/ElaineXu/pen/EWvGWX
              - neon
              https://codepen.io/markheggan/pen/LjrVYN
              - fireworks
              https://codepen.io/chuongdang/pen/yzpDG
              - moon
              https://codepen.io/agelber/pen/sjIKp
              */
window.requestAnimFrame = function () {
  return window.requestAnimationFrame ||
  window.webkitRequestAnimationFrame ||
  window.mozRequestAnimationFrame ||
  function (callback) {
    window.setTimeout(callback, 5);
  };
}();

// now we will setup our basic variables for the demo
var canvas = document.getElementById('canvas'),
ctx = canvas.getContext('2d'),
// full screen dimensions
cw = window.innerWidth,
ch = window.innerHeight,
// firework collection
fireworks = [],
// particle collection
particles = [],
// starting hue
hue = 120,
// when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks
limiterTotal = 5,
limiterTick = 0,
// this will time the auto launches of fireworks, one launch per 80 loop ticks
timerTotal = 80,
timerTick = 0,
mousedown = false,
// mouse x coordinate,
mx,
// mouse y coordinate
my;

// set canvas dimensions
canvas.width = cw;
canvas.height = ch;

// now we are going to setup our function placeholders for the entire demo

// get a random number within a range
function random(min, max) {
  return Math.random() * (max - min) + min;
}

// calculate the distance between two points
function calculateDistance(p1x, p1y, p2x, p2y) {
  var xDistance = p1x - p2x,
  yDistance = p1y - p2y;
  return Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));
}

// create firework
function Firework(sx, sy, tx, ty) {
  // actual coordinates
  this.x = sx;
  this.y = sy;
  // starting coordinates
  this.sx = sx;
  this.sy = sy;
  // target coordinates
  this.tx = tx;
  this.ty = ty;
  // distance from starting point to target
  this.distanceToTarget = calculateDistance(sx, sy, tx, ty);
  this.distanceTraveled = 0;
  // track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails
  this.coordinates = [];
  this.coordinateCount = 3;
  // populate initial coordinate collection with the current coordinates
  while (this.coordinateCount--) {
    this.coordinates.push([this.x, this.y]);
  }
  this.angle = Math.atan2(ty - sy, tx - sx);
  this.speed = 4;
  this.acceleration = 1.05;
  this.brightness = random(50, 70);
  // circle target indicator radius
  this.targetRadius = 1;
}

// update firework
Firework.prototype.update = function (index) {
  // remove last item in coordinates array
  this.coordinates.pop();
  // add current coordinates to the start of the array
  this.coordinates.unshift([this.x, this.y]);

  // cycle the circle target indicator radius
  if (this.targetRadius < 8) {
    this.targetRadius += 0.3;
  } else {
    this.targetRadius = 1;
  }

  // speed up the firework
  this.speed *= this.acceleration;

  // get the current velocities based on angle and speed
  var vx = Math.cos(this.angle) * this.speed,
  vy = Math.sin(this.angle) * this.speed;
  // how far will the firework have traveled with velocities applied?
  this.distanceTraveled = calculateDistance(this.sx, this.sy, this.x + vx, this.y + vy);

  // if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached
  if (this.distanceTraveled >= this.distanceToTarget) {
    createParticles(this.tx, this.ty);
    // remove the firework, use the index passed into the update function to determine which to remove
    fireworks.splice(index, 1);
  } else {
    // target not reached, keep traveling
    this.x += vx;
    this.y += vy;
  }
};

// draw firework
Firework.prototype.draw = function () {
  ctx.beginPath();
  // move to the last tracked coordinate in the set, then draw a line to the current x and y
  ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
  ctx.lineTo(this.x, this.y);
  ctx.strokeStyle = 'hsl(' + hue + ', 100%, ' + this.brightness + '%)';
  ctx.stroke();

  ctx.beginPath();
  // draw the target for this firework with a pulsing circle
  ctx.arc(this.tx, this.ty, this.targetRadius, 0, Math.PI * 2);
  ctx.stroke();
};

// create particle
function Particle(x, y) {
  this.x = x;
  this.y = y;
  // track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails
  this.coordinates = [];
  this.coordinateCount = 5;
  while (this.coordinateCount--) {
    this.coordinates.push([this.x, this.y]);
  }
  // set a random angle in all possible directions, in radians
  this.angle = random(0, Math.PI * 2);
  this.speed = random(1, 10);
  // friction will slow the particle down
  this.friction = 0.95;
  // gravity will be applied and pull the particle down
  this.gravity = 1;
  // set the hue to a random number +-20 of the overall hue variable
  this.hue = random(hue - 20, hue + 20);
  this.brightness = random(50, 80);
  this.alpha = 1;
  // set how fast the particle fades out
  this.decay = random(0.015, 0.03);
}

// update particle
Particle.prototype.update = function (index) {
  // remove last item in coordinates array
  this.coordinates.pop();
  // add current coordinates to the start of the array
  this.coordinates.unshift([this.x, this.y]);
  // slow down the particle
  this.speed *= this.friction;
  // apply velocity
  this.x += Math.cos(this.angle) * this.speed;
  this.y += Math.sin(this.angle) * this.speed + this.gravity;
  // fade out the particle
  this.alpha -= this.decay;

  // remove the particle once the alpha is low enough, based on the passed in index
  if (this.alpha <= this.decay) {
    particles.splice(index, 1);
  }
};

// draw particle
Particle.prototype.draw = function () {
  ctx.beginPath();
  // move to the last tracked coordinates in the set, then draw a line to the current x and y
  ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
  ctx.lineTo(this.x, this.y);
  ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';
  ctx.stroke();
};

// create particle group/explosion
function createParticles(x, y) {
  // increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though
  var particleCount = 30;
  while (particleCount--) {
    particles.push(new Particle(x, y));
  }
}

// main demo loop
function loop() {
  // this function will run endlessly with requestAnimationFrame
  requestAnimFrame(loop);

  // increase the hue to get different colored fireworks over time
  hue += 0.5;

  // normally, clearRect() would be used to clear the canvas
  // we want to create a trailing effect though
  // setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely
  ctx.globalCompositeOperation = 'destination-out';
  // decrease the alpha property to create more prominent trails
  ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
  ctx.fillRect(0, 0, cw, ch);
  // change the composite operation back to our main mode
  // lighter creates bright highlight points as the fireworks and particles overlap each other
  ctx.globalCompositeOperation = 'lighter';

  // loop over each firework, draw it, update it
  var i = fireworks.length;
  while (i--) {
    fireworks[i].draw();
    fireworks[i].update(i);
  }

  // loop over each particle, draw it, update it
  var i = particles.length;
  while (i--) {
    particles[i].draw();
    particles[i].update(i);
  }

  // launch fireworks automatically to random coordinates, when the mouse isn't down
  if (timerTick >= timerTotal) {
    if (!mousedown) {
      // start the firework at the bottom middle of the screen, then set the random target coordinates, the random y coordinates will be set within the range of the top half of the screen
      fireworks.push(new Firework(cw / 2, ch, random(0, cw), random(0, ch / 2)));
      timerTick = 0;
    }
  } else {
    timerTick++;
  }

  // limit the rate at which fireworks get launched when mouse is down
  if (limiterTick >= limiterTotal) {
    if (mousedown) {
      // start the firework at the bottom middle of the screen, then set the current mouse coordinates as the target
      fireworks.push(new Firework(cw / 2, ch, mx, my));
      limiterTick = 0;
    }
  } else {
    limiterTick++;
  }
}
window.onload = function () {
  var revelead = false;
  var pages = document.getElementsByClassName("page");
  var merrywrap = document.getElementById("merrywrap");
  var letter = document.getElementById("letter");
  var envolope = document.getElementById("envolope");
  var envolopeTop = document.getElementById("envolope-top");
  var step = 0;
  var stepMinutes = [2000, 2000, 1000, 1000, 1000, 1000, 2000, 1000];
  function init() {
    envolope.addEventListener("click", openLetter, false);
    document.getElementById("button_home").addEventListener("click", menuHomeAction, false);
    document.getElementById("button_news").addEventListener("click", menuNewsAction, false);
    document.getElementById("button_contact").addEventListener("click", menuContactAction, false);
  }
  function openLetter() {
    console.log(step);
    if (step === 0) {
      envolope.removeEventListener("click", openLetter, false);
      envolopeTop.className = 'top';
      envolopeTop.style = 'animation:2s flipTop; animation-fill-mode: forwards';
    }
    if (step === 1) {
      envolopeTop.className = 'top_flip';
      letter.style ="animation: 4s slideLetter; animation-fill-mode: forwards";
    }
    if (step === 2) {
      document.getElementsByClassName('back')[0] .style = "display: none";
      document.getElementsByClassName('front')[0].style = "display: none";
      letter.style = 'animation:2s expandLetter; animation-fill-mode: forwards';
    }
    if (step > 2) {
      merrywrap.className = 'merrywrap step-' + (step - 3);
    }
    if (step === 6) {
      if (revelead != true) {
        revelead = true;
        reveal();
      }
      letter.className = 'letter';
    }
    if (step === 7) {
      letter.style = "display: none";
      document.getElementById("page_home").style = "display:block";
      return;
    }
    setTimeout(openLetter, stepMinutes[step]);
    step++;
  }

  function menuActionClear() {
    for (var i=0; i < pages.length; i++) {
      pages[i].style = "display:none";
    }
    if (revelead != true) {
      revelead = true;
      document.getElementsByClassName('back')[0] .style = "display: none";
      document.getElementsByClassName('front')[0].style = "display: none";
      letter.style = "display: none";
      merrywrap.className = 'merrywrap step-4';
      reveal();
    }
  }

  function menuHomeAction() {
    console.log("menuHomeAction");
    menuActionClear();
    document.getElementById("page_home").style = "display:block";
  }

  function menuNewsAction() {
    console.log("menuNewsAction");
    menuActionClear();
    document.getElementById("page_news").style = "display:block";
  }

  function menuContactAction() {
    console.log("menuContactAction");
    menuActionClear();
    document.getElementById("page_contact").style = "display:block";
  }

  init();

};

function reveal() {
  document.querySelector('.merrywrap').style.backgroundColor = 'transparent';

  loop();

  var w, h;
  if (window.innerWidth >= 1000) {
    w = 295;h = 185;
  } else
  {
    w = 255;h = 155;
  }
  var ifrm = document.createElement("iframe")

  ifrm.setAttribute("src", "https://www.youtube.com/embed/ZtUJNhKbbx4?controls=0&autoplay=1&loop=1");
  //ifrm.style.width = `${w}px`;
  //ifrm.style.height = `${h}px`;
  ifrm.style.border = 'none';
  document.querySelector('#video').appendChild(ifrm);
}
//# sourceURL=pen.js
</script>
</body></html>
